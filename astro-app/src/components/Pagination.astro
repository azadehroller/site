---
interface Props {
  currentPage: number;
  totalPages: number;
  baseUrl: string;
}

const { currentPage, totalPages, baseUrl } = Astro.props;

// Generate page numbers to show
const getPageNumbers = () => {
  const pages: (number | string)[] = [];
  const showEllipsis = totalPages > 7;
  
  if (!showEllipsis) {
    for (let i = 1; i <= totalPages; i++) {
      pages.push(i);
    }
  } else {
    // Always show first page
    pages.push(1);
    
    if (currentPage > 3) {
      pages.push('...');
    }
    
    // Show pages around current
    for (let i = Math.max(2, currentPage - 1); i <= Math.min(totalPages - 1, currentPage + 1); i++) {
      pages.push(i);
    }
    
    if (currentPage < totalPages - 2) {
      pages.push('...');
    }
    
    // Always show last page
    if (totalPages > 1) {
      pages.push(totalPages);
    }
  }
  
  return pages;
};

const pageNumbers = getPageNumbers();

const getPageUrl = (page: number) => {
  return page === 1 ? '/' : `${baseUrl}/${page}`;
};
---

<nav class="flex justify-center items-center gap-2 py-8 mt-8" aria-label="Pagination">
  {/* Previous button */}
  {currentPage > 1 ? (
    <a
      href={getPageUrl(currentPage - 1)}
      class="px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-100 transition-colors text-gray-700 font-medium"
      aria-label="Previous page"
    >
      ← Previous
    </a>
  ) : (
    <span class="px-4 py-2 rounded-lg border border-gray-200 text-gray-400 cursor-not-allowed">
      ← Previous
    </span>
  )}

  {/* Page numbers */}
  <div class="hidden sm:flex gap-1">
    {pageNumbers.map((page) => (
      typeof page === 'number' ? (
        page === currentPage ? (
          <span
            class="px-4 py-2 rounded-lg bg-black text-white font-medium"
            aria-current="page"
          >
            {page}
          </span>
        ) : (
          <a
            href={getPageUrl(page)}
            class="px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-100 transition-colors text-gray-700"
          >
            {page}
          </a>
        )
      ) : (
        <span class="px-2 py-2 text-gray-500">...</span>
      )
    ))}
  </div>

  {/* Mobile page indicator */}
  <span class="sm:hidden text-gray-600 font-medium">
    Page {currentPage} of {totalPages}
  </span>

  {/* Next button */}
  {currentPage < totalPages ? (
    <a
      href={getPageUrl(currentPage + 1)}
      class="px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-100 transition-colors text-gray-700 font-medium"
      aria-label="Next page"
    >
      Next →
    </a>
  ) : (
    <span class="px-4 py-2 rounded-lg border border-gray-200 text-gray-400 cursor-not-allowed">
      Next →
    </span>
  )}
</nav>



